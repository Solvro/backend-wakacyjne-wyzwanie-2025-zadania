import { glob } from "glob";
import path from "path";
import IsFilteredPath from "./isFilteredPath.js";
// eslint-disable-next-line @typescript-eslint/no-extraneous-class
export class FileEnumerator {
    static enumerateFiles({ sourceGlobs, extensions, filterFromPaths, }) {
        // Create glob pattern that includes extensions
        const patterns = sourceGlobs.flatMap((filePath) => {
            if (path.extname(filePath)) {
                return filePath;
            }
            return extensions.map((extension) => `${filePath}/**/*${extension}`);
        });
        // Find all files matching the patterns
        const files = glob.sync(patterns, {
            ignore: ["**/node_modules/**"],
            nodir: true,
            absolute: true,
        });
        // Map to the expected format and filter
        return files
            .map((filePath) => ({
            ignored: false, // You can implement custom ignore logic if needed
            filename: filePath,
        }))
            .filter((file) => {
            const isFiltered = IsFilteredPath.test(file.filename, filterFromPaths);
            return !isFiltered;
        });
    }
}
export default FileEnumerator;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY3VzdG9tRmlsZUVudW1lcmF0b3JXcmFwcGVyLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vc3JjL3V0aWxzL2ZpbGVzL2N1c3RvbUZpbGVFbnVtZXJhdG9yV3JhcHBlci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUMsSUFBSSxFQUFDLE1BQU0sTUFBTSxDQUFDO0FBQzFCLE9BQU8sSUFBSSxNQUFNLE1BQU0sQ0FBQztBQUN4QixPQUFPLGNBQWMsTUFBTSxxQkFBcUIsQ0FBQztBQU9qRCxrRUFBa0U7QUFDbEUsTUFBTSxPQUFPLGNBQWM7SUFDdkIsTUFBTSxDQUFDLGNBQWMsQ0FBQyxFQUNsQixXQUFXLEVBQ1gsVUFBVSxFQUNWLGVBQWUsR0FLbEI7UUFDRywrQ0FBK0M7UUFDL0MsTUFBTSxRQUFRLEdBQUcsV0FBVyxDQUFDLE9BQU8sQ0FBQyxDQUFDLFFBQVEsRUFBRSxFQUFFO1lBQzlDLElBQUksSUFBSSxDQUFDLE9BQU8sQ0FBQyxRQUFRLENBQUMsRUFBRSxDQUFDO2dCQUN6QixPQUFPLFFBQVEsQ0FBQztZQUNwQixDQUFDO1lBQ0QsT0FBTyxVQUFVLENBQUMsR0FBRyxDQUNqQixDQUFDLFNBQWlCLEVBQUUsRUFBRSxDQUFDLEdBQUcsUUFBUSxRQUFRLFNBQVMsRUFBRSxDQUN4RCxDQUFDO1FBQ04sQ0FBQyxDQUFDLENBQUM7UUFFSCx1Q0FBdUM7UUFDdkMsTUFBTSxLQUFLLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxRQUFRLEVBQUU7WUFDOUIsTUFBTSxFQUFFLENBQUMsb0JBQW9CLENBQUM7WUFDOUIsS0FBSyxFQUFFLElBQUk7WUFDWCxRQUFRLEVBQUUsSUFBSTtTQUNqQixDQUFDLENBQUM7UUFFSCx3Q0FBd0M7UUFDeEMsT0FBTyxLQUFLO2FBQ1AsR0FBRyxDQUNBLENBQUMsUUFBUSxFQUFZLEVBQUUsQ0FBQyxDQUFDO1lBQ3JCLE9BQU8sRUFBRSxLQUFLLEVBQUUsa0RBQWtEO1lBQ2xFLFFBQVEsRUFBRSxRQUFRO1NBQ3JCLENBQUMsQ0FDTDthQUNBLE1BQU0sQ0FBQyxDQUFDLElBQUksRUFBRSxFQUFFO1lBQ2IsTUFBTSxVQUFVLEdBQUcsY0FBYyxDQUFDLElBQUksQ0FDbEMsSUFBSSxDQUFDLFFBQVEsRUFDYixlQUFlLENBQ2xCLENBQUM7WUFFRixPQUFPLENBQUMsVUFBVSxDQUFDO1FBQ3ZCLENBQUMsQ0FBQyxDQUFDO0lBQ1gsQ0FBQztDQUNKO0FBRUQsZUFBZSxjQUFjLENBQUMifQ==