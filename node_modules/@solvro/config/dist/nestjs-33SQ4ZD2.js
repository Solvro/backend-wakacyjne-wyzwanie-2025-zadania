import {
  node
} from "./chunk-AQ5RXFKK.js";
import {
  typescriptStrict,
  unicorn
} from "./chunk-VD4FWSAD.js";
import {
  imports
} from "./chunk-VSUL3MI5.js";
import "./chunk-HM3MY7J3.js";
import {
  init_esm_shims
} from "./chunk-J5OUMHDO.js";

// src/eslint/presets/nestjs.ts
init_esm_shims();
import eslintNestJs from "@darraghor/eslint-plugin-nestjs-typed";
import { isPackageListed } from "local-pkg";
var nestjsPreset = async () => {
  const hasSwagger = await isPackageListed("@nestjs/swagger");
  const nestjsConfig = hasSwagger ? [
    ...eslintNestJs.configs.flatRecommended,
    {
      rules: {
        "@darraghor/nestjs-typed/api-property-matches-property-optionality": "warn",
        "@darraghor/nestjs-typed/controllers-should-supply-api-tags": "warn",
        "@darraghor/nestjs-typed/api-method-should-specify-api-response": "warn",
        "@darraghor/nestjs-typed/api-method-should-specify-api-operation": "warn",
        "@darraghor/nestjs-typed/api-enum-property-best-practices": "warn",
        "@darraghor/nestjs-typed/api-property-returning-array-should-set-array": "warn"
      }
    }
  ] : eslintNestJs.configs.flatNoSwagger;
  return [
    ...node(),
    ...unicorn(),
    ...typescriptStrict(),
    ...imports({ forbidDefaultExport: true }),
    ...nestjsConfig,
    {
      rules: {
        "no-implicit-coercion": [
          "error",
          {
            allow: ["+"]
          }
        ],
        "unicorn/prefer-top-level-await": "off",
        // flaky as hell
        "@darraghor/nestjs-typed/injectable-should-be-provided": "off"
      }
    },
    {
      rules: {
        "@typescript-eslint/no-extraneous-class": [
          "error",
          {
            allowEmpty: true
          }
        ]
      },
      files: ["**/*.module.ts"]
    },
    {
      rules: {
        "@typescript-eslint/no-floating-promises": "off"
      },
      files: ["./src/main.ts"]
    }
  ];
};
export {
  nestjsPreset
};
//# sourceMappingURL=nestjs-33SQ4ZD2.js.map