{"version":3,"sources":["../src/eslint/presets/nestjs.ts"],"sourcesContent":["import eslintNestJs from \"@darraghor/eslint-plugin-nestjs-typed\";\nimport { isPackageListed } from \"local-pkg\";\nimport type { ConfigArray, ConfigWithExtends } from \"typescript-eslint\";\n\nimport { imports } from \"../configs/imports\";\nimport { node } from \"../configs/node\";\nimport { typescriptStrict } from \"../configs/typescript-strict\";\nimport { unicorn } from \"../configs/unicorn\";\n\nexport const nestjsPreset = async (): Promise<ConfigWithExtends[]> => {\n  const hasSwagger = await isPackageListed(\"@nestjs/swagger\");\n\n  const nestjsConfig = hasSwagger\n    ? ([\n        ...eslintNestJs.configs.flatRecommended,\n        {\n          rules: {\n            \"@darraghor/nestjs-typed/api-property-matches-property-optionality\":\n              \"warn\",\n            \"@darraghor/nestjs-typed/controllers-should-supply-api-tags\":\n              \"warn\",\n            \"@darraghor/nestjs-typed/api-method-should-specify-api-response\":\n              \"warn\",\n            \"@darraghor/nestjs-typed/api-method-should-specify-api-operation\":\n              \"warn\",\n            \"@darraghor/nestjs-typed/api-enum-property-best-practices\": \"warn\",\n            \"@darraghor/nestjs-typed/api-property-returning-array-should-set-array\":\n              \"warn\",\n          },\n        },\n      ] satisfies ConfigArray)\n    : eslintNestJs.configs.flatNoSwagger;\n\n  return [\n    ...node(),\n    ...unicorn(),\n    ...typescriptStrict(),\n    ...imports({ forbidDefaultExport: true }),\n    ...nestjsConfig,\n    {\n      rules: {\n        \"no-implicit-coercion\": [\n          \"error\",\n          {\n            allow: [\"+\"],\n          },\n        ],\n        \"unicorn/prefer-top-level-await\": \"off\",\n        // flaky as hell\n        \"@darraghor/nestjs-typed/injectable-should-be-provided\": \"off\",\n      },\n    },\n    {\n      rules: {\n        \"@typescript-eslint/no-extraneous-class\": [\n          \"error\",\n          {\n            allowEmpty: true,\n          },\n        ],\n      },\n      files: [\"**/*.module.ts\"],\n    },\n    {\n      rules: {\n        \"@typescript-eslint/no-floating-promises\": \"off\",\n      },\n      files: [\"./src/main.ts\"],\n    },\n  ];\n};\n"],"mappings":";;;;;;;;;;;;;;;;AAAA;AAAA,OAAO,kBAAkB;AACzB,SAAS,uBAAuB;AAQzB,IAAM,eAAe,YAA0C;AACpE,QAAM,aAAa,MAAM,gBAAgB,iBAAiB;AAE1D,QAAM,eAAe,aAChB;AAAA,IACC,GAAG,aAAa,QAAQ;AAAA,IACxB;AAAA,MACE,OAAO;AAAA,QACL,qEACE;AAAA,QACF,8DACE;AAAA,QACF,kEACE;AAAA,QACF,mEACE;AAAA,QACF,4DAA4D;AAAA,QAC5D,yEACE;AAAA,MACJ;AAAA,IACF;AAAA,EACF,IACA,aAAa,QAAQ;AAEzB,SAAO;AAAA,IACL,GAAG,KAAK;AAAA,IACR,GAAG,QAAQ;AAAA,IACX,GAAG,iBAAiB;AAAA,IACpB,GAAG,QAAQ,EAAE,qBAAqB,KAAK,CAAC;AAAA,IACxC,GAAG;AAAA,IACH;AAAA,MACE,OAAO;AAAA,QACL,wBAAwB;AAAA,UACtB;AAAA,UACA;AAAA,YACE,OAAO,CAAC,GAAG;AAAA,UACb;AAAA,QACF;AAAA,QACA,kCAAkC;AAAA;AAAA,QAElC,yDAAyD;AAAA,MAC3D;AAAA,IACF;AAAA,IACA;AAAA,MACE,OAAO;AAAA,QACL,0CAA0C;AAAA,UACxC;AAAA,UACA;AAAA,YACE,YAAY;AAAA,UACd;AAAA,QACF;AAAA,MACF;AAAA,MACA,OAAO,CAAC,gBAAgB;AAAA,IAC1B;AAAA,IACA;AAAA,MACE,OAAO;AAAA,QACL,2CAA2C;AAAA,MAC7C;AAAA,MACA,OAAO,CAAC,eAAe;AAAA,IACzB;AAAA,EACF;AACF;","names":[]}